import{U as M,d as k}from"./utils-DTcZfRkq.js";import{g as Z}from"./index-ZORhgBxb.js";import{_ as ee,i as u,g as v,j as $,k as te,p as se,l as ne,r as B,o as l,c as a,n as C,b as o,t as f,h as T,e as D,x as N,d as oe,y as le,F as re,m as ie}from"./app-C0uy0hwi.js";const X=(i,s,g={},_)=>{if(i)return _||(s=0),Z.to(i,{...g,duration:s})},ae="/assets/ch_drama-Codcs0g0.mp4",ce={class:"carousel-live-row"},ue={class:"logo"},me={class:"carousel-live-num"},de={key:0},he={key:0,class:"flag-live flag-live-s"},ve={class:"carousel-live-info"},ge={class:"carousel-live-title"},fe={class:"carousel-live-progress"},_e={class:"progress"},pe={key:1,class:"carousel-live-info"},ye={class:"carousel-live-title"},xe={key:2,class:"carousel-live-video"},ke={autoplay:"",loop:"",muted:"",width:"445",height:"250"},Ce=["src"],Te=["onClick"],Ne={key:0},Ie={__name:"Carouseltem",props:{item:{type:Object,required:!0},index:{type:Number,required:!0},lineFocus:{type:Boolean,required:!0},lineFocusX:{type:Number,required:!0},scrollY:{type:Number,required:!0},indexPage:{type:Number,required:!0}},setup(i){const s=i,g=u(!1),_=u(null),Y=u(null),p=u(null),m=u(!1);let I=new Image;const y=u(null),A=u(!1),d=v(()=>(console.log("🚀 ~ focusedItem ~ props.lineFocusX:",s.lineFocusX),s.item.scheduleList[s.lineFocusX])),q=v(()=>s.item.scheduleList.slice(0,s.item.scheduleList.length)),E=()=>{V().then(e=>{e.success?(m.value=!0,p.value=F()):m.value=!1})},V=async()=>{I=new Image;const e=F();return await M.preloadImage(e,I)},F=()=>`assets/upload/white_epg_${s.item.svcId}.png`,H=v(()=>{if(!s.item)return;let e=s.item.channelNo;const t=3-e.toString().length;if(t>0)for(let n=0;n<t;n++)e=`0${e}`;return e});v(()=>{if(s.item.channelName)return M.elipsis(s.item.channelName,500)});const P=v(()=>{if(s.item.channelName)return[s.item.channelName]});function R(e){if(e&&e.start_time&&e.end_time){const t=k().unix()*1e3,n=this.getUnixTimeA(e.start_time),r=this.getUnixTimeA(e.end_time);if(n<t&&t<r)return!0;if(t>r)return!0}return!1}const O=e=>R(e),j=e=>{const t={},n=s.item,r=n.scheduleList[0];return t.svcId=n.svcId,t.channelName=n.channelName,t.channelNo=n.channelNo,t.title=r.title,t.startTime=L(r),t.endTime=S(r),t.progressBar=w(r),t},z=()=>{j(s.index)},G=e=>{g.value||e.noProgram||(Y.value=e.m_url,_.value={...e,channelNo:s.item.num,channelName:s.item.name,img:s.item.img},g.value=!0)},W=()=>{},J=(e,t,n)=>e&&t+1===n;function b(e){const t=k(e).format("YYMMDDHHmm");return k(t,"YYMMDDHHmm").unix()*1e3}const w=e=>{const t=new Date().getTime(),n=b(e.start_time),r=b(e.end_time);if(t<n)return 0;let c=(t-n)/(r-n)*100;return c=c>100?100:c,c},L=e=>{if(!e.start_time)return"00:00";const t=virtualStore.getUnixTimeA(e.start_time);return U(new Date(t))},S=e=>{if(!e.end_time)return"00:00";const t=virtualStore.getUnixTimeA(e.end_time);return U(new Date(t))},U=e=>{let t=String(e.getHours());t=t.length===1?`0${t}`:t;let n=String(e.getMinutes());return n=n.length===1?`0${n}`:n,`${t}:${n}`},K=e=>[e.title];$(()=>s.scrollY,()=>{Q(s.scrollY)}),$(()=>s.item,()=>{p.value=null,s.item?(m.value=!0,E()):m.value=!1},{immediate:!0}),te(()=>{history.historyMethod!=="RECOVER"&&z()}),se(()=>{X(y.value,0,{x:s.scrollY})}),ne(()=>{});const Q=e=>{X(y.value,.5,{x:e,ease:"back.out(3)",onComplete:()=>{A.value=!1}})};return(e,t)=>{var c;const n=B("schedule-TextMoveAnimationGroup"),r=B("schedule-CarouselProductImg");return l(),a("div",ce,[s.item.scheduleList.length?(l(),a("div",{key:0,class:C(["carousel-live-block carousel-live-block-front",{"--focused focusOn":i.lineFocus}]),onClick:W},[o("div",ue,[o("div",me,f(H.value),1),o("div",{class:C(["carousel-live-epg",{"epg-logo-hide":!m.value}])},[m.value?(l(),a("div",{key:0,class:"epg-logo",style:T({backgroundImage:`url(${p.value})`})},null,4)):(l(),D(n,{key:1,"class-arr":["epg-log-text"],active:!0,width:"95%","text-array":P.value,delay:1e3},null,8,["text-array"]))],2)]),i.lineFocus?(l(),a("div",de,[O(d.value)?(l(),a("span",he,"LIVE")):N("",!0),o("div",ve,[o("p",ge,[oe(n,{"class-arr":["name"],active:i.lineFocus,width:"80%","text-array":K(d.value),delay:1e3},null,8,["active","text-array"])]),o("div",fe,[o("em",null,f(L(d.value)),1),o("div",_e,[o("span",{style:T({width:`${w(d.value)}%`})},null,4)]),o("em",null,f(S(d.value)),1)])])])):(l(),a("div",pe,[o("div",ye,f((c=d.value)==null?void 0:c.title),1)])),i.lineFocus?(l(),a("div",xe,[o("video",ke,[o("source",{type:"video/mp4",src:le(ae)},null,8,Ce)])])):N("",!0)],2)):N("",!0),o("div",{ref_key:"groupRef",ref:y,class:"carousel__cell",style:T({transform:`translateX(${i.scrollY})`})},[(l(!0),a(re,null,ie(q.value,(x,h)=>(l(),a("div",{key:h,class:C(["carousel-live-block",{"carousel-live-block-s":h!==s.lineFocusX,"fade-out":h<s.lineFocusX,"fade-in":h===s.lineFocusX}]),onClick:Fe=>G(x)},[x.title?(l(),D(r,{key:1,"item-info":x,"b-full-size":!J(i.lineFocus,h,s.lineFocusX)},null,8,["item-info","b-full-size"])):(l(),a("p",Ne,"프로그램 정보 업데이트 예정"))],10,Te))),128))],4)])}}},Se=ee(Ie,[["__scopeId","data-v-e0b110fa"],["__file","Carouseltem.vue"]]);export{Se as default};
